(()=>{"use strict";const e=e=>{let t=e,s=!1,r="",l=()=>s;return{setOwner:(e="x||o")=>0==l()&&(((e=!1)=>{s=e})(!0),r=e,!0),getIsOwn:l,getOwner:()=>r,getPos:()=>t}},t=(e,t)=>{let s=e,r=(()=>{let e={A:[],B:[],C:[]};return{getTitles:()=>e,setTitle:(t="")=>{let s=t.split(""),r=s[0].toUpperCase();e[r].push(s[0]+s[1]),e[r].length>1&&((t="")=>{let s=[];s=e[t];let r="";for(let e=0;e<s.length;e++)for(let t=0;t<s.length;t++){let l=e=>s[e].split("")[1];l(e)<l(t)&&(r=s[t],s[t]=s[e],s[e]=r)}})(r)}}})(),l={requestTitle:`request_title${s}`,reqTitleResponse:`request_title_resp${s}`,submitTitlesOwned:`submit_titles_owned${s}`},o=(e={resp:t,pos:s})=>{let t=e.resp,s=e.pos;1==t&&r.setTitle(s)};return t.subscribe(l.reqTitleResponse,o),{setTitel:o,requestTitle:(e="A",r=0)=>{const o={Group:e,Pos:r,Owner:s};t.publish(l.requestTitle,o)},getTitles:r.getTitles}};window.pubSub=(()=>{let e={};return{publish:(t,s)=>{void 0===e[t]?console.log(`PubSub : ${t} does not exist`):e[t].forEach((e=>{e(s)}))},subscribe:(t,s)=>{null==e[t]&&(e[t]=[]),e[t].push(s)}}})(),window.board=(t=>{let s={A:[e("a0"),e("a1"),e("a2")],B:[e("b0"),e("b1"),e("b2")],C:[e("c0"),e("c1"),e("c2")]},r=e=>`request_title${e}`,l=e=>`request_title_resp${e}`,o={check:e=>{if(null!=typeof e)return 1==(e=>{let t=(e,t)=>{let s=[],r=0,l=["a","b","c"].map((e=>e+t)),o=0;return Object.keys(e).forEach((r=>{l[o]==e[r][t]?s.push(!0):s.push(!1),o+=1})),s.forEach((e=>{1==e&&(r+=1)})),3==r};return 1==t(e,0)||1==t(e,1)||1==t(e,2)})(e)||1==(e=>{let t=(e,t)=>{let s=[],r=!1,l=[0,1,2].map((e=>t.toLowerCase()+e)),o=0;return l.forEach((r=>{r==e[t][o]?s.push(!0):s.push(!1),o+=1})),s.forEach((e=>{r=0!=e})),r};return 1==t(e,"A")||1==t(e,"B")||1==t(e,"C")})(e)||1==(e=>{let t=(e,t)=>{let s=0;return Object.keys(e).forEach((r=>{e[r].forEach((e=>{e==t[r]&&(s+=1)}))})),3==s};return 1==t(e,{A:"a0",B:"b1",C:"c2"})||1==t(e,{A:"a2",B:"b1",C:"c0"})})(e);console.log("pattern can't be performed over an undefined object")}},n=(e={Group:"",Pos:0,Owner:""})=>{let r={};r=s[e.Group];let o=r[e.Pos],n=o.setOwner(e.Owner);0==n?(console.log(`${o.getPos()} is owned by ${o.getOwner()}`),t.publish(l(e.Owner),{resp:!1,pos:o.getPos()})):1==n&&(console.log(`${o.getPos()} was take by ${o.getOwner()}`),t.publish(l(e.Owner),{resp:!0,pos:o.getPos()}))};return t.subscribe(r("x"),n),t.subscribe(r("o"),n),{isWinner:o.check,setTitle:n}})(pubSub),window.playerOne=t("x",pubSub),window.playerTwo=t("o",pubSub)})();