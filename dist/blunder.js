(()=>{"use strict";const e=e=>{let t=e,s=!1,r="",o=()=>s;return{setOwner:(e="x||o")=>0==o()&&(((e=!1)=>{s=e})(!0),r=e,!0),getIsOwn:o,getOwner:()=>r,getPos:()=>t}},t=(e,t)=>{let s=e,r=(()=>{let e={A:[],B:[],C:[]};return{getTitles:()=>e,setTitle:(t="")=>{let s=t.split(""),r=s[0].toUpperCase();e[r].push(s[0]+s[1]),e[r].length>1&&((t="")=>{let s=[];s=e[t];let r="";for(let e=0;e<s.length;e++)for(let t=0;t<s.length;t++){let o=e=>s[e].split("")[1];o(e)<o(t)&&(r=s[t],s[t]=s[e],s[e]=r)}})(r)}}})(),o={requestTitle:`request_title${s}`,reqTitleResponse:`request_title_resp${s}`,reqTitlesOwned:`submit_titles_owned${s}`},l=(e={resp:s,pos:l})=>{let s=e.resp,l=e.pos;1==s&&r.setTitle(l),t.publish(o.reqTitlesOwned,r.getTitles())};return t.subscribe(o.reqTitleResponse,l),{setTitel:l,requestTitle:(e="A",r=0)=>{const l={Group:e,Pos:r,Owner:s};t.publish(o.requestTitle,l)},getTitles:r.getTitles}};window.pubSub=(()=>{let e={};return{publish:(t,s)=>{void 0===e[t]?console.log(`PubSub : ${t} does not exist`):e[t].forEach((e=>{e(s)}))},subscribe:(t,s)=>{null==e[t]&&(e[t]=[]),e[t].push(s)}}})(),window.board=(t=>{let s={A:[e("a0"),e("a1"),e("a2")],B:[e("b0"),e("b1"),e("b2")],C:[e("c0"),e("c1"),e("c2")]},r=e=>`request_title${e}`,o=e=>`request_title_resp${e}`,l=e=>`submit_titles_owned${e}`,n={check:e=>{if(null!=typeof e)return 1==(e=>{let t=(e,t)=>{let s=[],r=0,o=["a","b","c"].map((e=>e+t)),l=0;return Object.keys(e).forEach((r=>{o[l]==e[r][t]?s.push(!0):s.push(!1),l+=1})),s.forEach((e=>{1==e&&(r+=1)})),3==r};return 1==t(e,0)||1==t(e,1)||1==t(e,2)})(e)||1==(e=>{let t=(e,t)=>{let s=[],r=!1,o=[0,1,2].map((e=>t.toLowerCase()+e)),l=0;return o.forEach((r=>{r==e[t][l]?s.push(!0):s.push(!1),l+=1})),s.forEach((e=>{r=0!=e})),r};return 1==t(e,"A")||1==t(e,"B")||1==t(e,"C")})(e)||1==(e=>{let t=(e,t)=>{let s=0;return Object.keys(e).forEach((r=>{e[r].forEach((e=>{e==t[r]&&(s+=1)}))})),3==s};return 1==t(e,{A:"a0",B:"b1",C:"c2"})||1==t(e,{A:"a2",B:"b1",C:"c0"})})(e);console.log("pattern can't be performed over an undefined object")}},u=(e={Group:"",Pos:0,Owner:""})=>{let r={};r=s[e.Group];let l=r[e.Pos],n=l.setOwner(e.Owner);0==n?(console.log(`${l.getPos()} is owned by ${l.getOwner()}`),t.publish(o(e.Owner),{resp:!1,pos:l.getPos()})):1==n&&(console.log(`${l.getPos()} was take by ${l.getOwner()}`),t.publish(o(e.Owner),{resp:!0,pos:l.getPos()}))};return t.subscribe(r("x"),u),t.subscribe(r("o"),u),t.subscribe(l("x"),(function(e){1==n.check(e)&&console.log("x won round")})),t.subscribe(l("o"),(function(e){1==n.check(e)&&console.log("o won round")})),{isWinner:n.check,setTitle:u}})(pubSub),window.playerOne=t("x",pubSub),window.playerTwo=t("o",pubSub)})();